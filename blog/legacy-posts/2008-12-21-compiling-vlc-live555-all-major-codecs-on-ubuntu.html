<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Compiling VLC Live555 All Major Codecs On Ubuntu - Julien Simon</title>
  <meta name="description" content="How to compile VLC with all major codecs on Ubuntu, including ffmpeg, x264, and live555 libraries.">
  <link rel="stylesheet" href="../../css/styles.css">
  <link rel="icon" href="../../assets/favicon.ico" type="image/x-icon">
  <style>
    .legacy-post-container {
      max-width: 800px;
      margin: 0 auto;
      padding: var(--space-6);
      background: var(--surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
    }
    
    .legacy-post-header {
      margin-bottom: var(--space-6);
      padding-bottom: var(--space-4);
      border-bottom: 1px solid var(--border);
    }
    
    .legacy-post-title {
      font-size: var(--text-3xl);
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: var(--space-3);
    }
    
    .legacy-post-meta {
      display: flex;
      gap: var(--space-4);
      color: var(--text-secondary);
      font-size: var(--text-sm);
    }
    
    .legacy-post-content {
      line-height: 1.7;
      color: var(--text-primary);
    }
    
    .legacy-post-content p {
      margin-bottom: var(--space-4);
    }
    
    .legacy-post-content h2 {
      font-size: var(--text-xl);
      font-weight: 600;
      color: var(--text-primary);
      margin: var(--space-6) 0 var(--space-4) 0;
      padding-top: var(--space-4);
      border-top: 1px solid var(--border);
    }
    
    .legacy-post-content h3 {
      font-size: var(--text-lg);
      font-weight: 600;
      color: var(--text-primary);
      margin: var(--space-5) 0 var(--space-3) 0;
    }
    
    .legacy-post-content ul,
    .legacy-post-content ol {
      margin: var(--space-4) 0;
      padding-left: var(--space-6);
    }
    
    .legacy-post-content li {
      margin-bottom: var(--space-2);
    }
    
    .legacy-post-content pre {
      background: var(--code-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: var(--space-4);
      margin: var(--space-4) 0;
      overflow-x: auto;
      font-family: var(--font-mono);
      font-size: var(--text-sm);
    }
    
    .legacy-post-content code {
      background: var(--code-bg);
      padding: 2px 4px;
      border-radius: var(--radius-sm);
      font-family: var(--font-mono);
      font-size: var(--text-sm);
    }
    
    .legacy-post-content pre code {
      background: none;
      padding: 0;
    }
    
    .legacy-post-content blockquote {
      border-left: 4px solid var(--primary-color);
      padding-left: var(--space-4);
      margin: var(--space-4) 0;
      font-style: italic;
      color: var(--text-secondary);
    }
    
    .legacy-post-content a {
      color: var(--primary-color);
      text-decoration: none;
    }
    
    .legacy-post-content a:hover {
      text-decoration: underline;
    }
    
    .legacy-post-content img {
      max-width: 100%;
      height: auto;
      border-radius: var(--radius);
      margin: var(--space-4) 0;
    }
    
    .legacy-post-content .gist {
      margin: var(--space-4) 0;
    }
    
    .legacy-post-content table {
      width: 100%;
      border-collapse: collapse;
      margin: var(--space-6) 0;
    }
    
    .legacy-post-content th,
    .legacy-post-content td {
      padding: var(--space-2) var(--space-3);
      text-align: left;
      border-bottom: 1px solid var(--border);
    }
    
    .legacy-post-content th {
      background: var(--surface);
      font-weight: 600;
    }
    
    .legacy-post-content strong,
    .legacy-post-content b {
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .legacy-post-content em,
    .legacy-post-content i {
      font-style: italic;
    }
    
    @media (max-width: 768px) {
      .legacy-post-container {
        padding: var(--space-4);
        margin: var(--space-4);
      }
      
      .legacy-post-title {
        font-size: var(--text-2xl);
      }
      
      .legacy-post-meta {
        flex-direction: column;
        gap: var(--space-2);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img src="../../assets/julien.webp" alt="Julien Simon" class="profile-image">
      <h1>Julien Simon</h1>
      <p class="title">Chief Evangelist @ Arcee AI</p>
      
    </header>

    <main>
      <article class="legacy-post-container">
        <header class="legacy-post-header">
          <h1 class="legacy-post-title">Compiling VLC Live555 All Major Codecs On Ubuntu</h1>
          <div class="legacy-post-meta">
            <span class="legacy-post-date">December 21, 2008</span>
            <span class="legacy-post-category">Linux & Ubuntu</span>
          </div>
        </header>
        
        <div class="legacy-post-content">
          <p><strong>[Updated on 2009/04/03]</strong> VLC 0.9.9 is out. Here is the <a href="2009-03-04-compiling-vlc-0-9-9-live555-all-major-codecs-ubuntu-8-10.html">updated tutorial</a>.</p>

<p>In yesterday's post, I showed you <a href="2008-20-12-compiling-ffmeg-x264-mp3-xvid-amr-on-ubuntu.html">how to build a pretty complete ffmpeg</a>.</p>

<p>Today, let's build the latest <a href="http://www.videolan.org/">VLC</a> from source on Ubuntu 8.04.</p>

<p>VLC is the best audio / video player there is, but just like ffmpeg, the binary found in Linux distributions is often outdated and incomplete... and we all know that it's quite frustrating to get stuck with files that you can't play.</p>

<p>For starters, you have to go through yesterday's post:</p>
          <ul>
            <li>we need the build directories of ffmpeg and x264 for the VLC build,</li>
            <li>up to date versions are required anyway,</li>
            <li>building and installing them will take care of a number of dependencies.</li>
          </ul>

<p>Once you've done that, there are additional dependencies to take care of.</p>

<h2>1) Installing libmad</h2>

<p>MAD is a high-quality MPEG audio decoder. At the time of this writing, the latest version is 0.15.1b. Let's get the source, build it and install it:</p>

<pre><code>ubuntu% wget http://ovh.dl.sourceforge.net/sourceforge/mad/libmad-0.15.1b.tar.gz
ubuntu% tar xvfz libmad-0.15.1b.tar.gz
ubuntu% cd libmad-0.15.1b
ubuntu% ./configure --prefix=/usr/local
ubuntu% make
ubuntu% sudo make install</code></pre>

<p><strong>[Updated on 2009/01/04]</strong> If you try to compile <em>libmad</em> with gcc 4.3, you will get the following error: <em>cc1: error: unrecognized command line option "-fforce-mem"</em>. To correct this, just remove the <em>-fforce-mem</em> flags from the CFLAGS list in the Makefile.</p>

<h2>2) Installing libdca</h2>

<p><a href="http://www.videolan.org/developers/libdca.html">libdca</a> is a free library for DTS audio. At the time of this writing, the latest version is 0.0.5. Let's get the source, build it and install it:</p>

<pre><code>ubuntu% wget http://download.videolan.org/pub/videolan/libdca/0.0.5/libdca-0.0.5.tar.bz2
ubuntu% bzip2 -d libdca-0.0.5.tar.bz2
ubuntu% tar xvf libdca-0.0.5.tar
ubuntu% cd libdca-0.0.5
ubuntu% ./configure --prefix=/usr/local
ubuntu% make
ubuntu% sudo make install</code></pre>

<h2>3) Installing libmpeg2</h2>

<p><a href="http://libmpeg2.sourceforge.net/">libmpeg2</a> is a free library for MPEG streams. At the time of this writing, the latest version is 2.0.5.1. Let's get the source, build it and install it:</p>

<pre><code>ubuntu% wget http://libmpeg2.sourceforge.net/files/libmpeg2-0.5.1.tar.gz
ubuntu% tar xvfz libmpeg2-0.5.1.tar.gz
ubuntu% cd libmpeg2-0.5.1
ubuntu% ./configure --prefix=/usr/local
ubuntu% make
ubuntu% sudo make install</code></pre>

<h2>4) Installing TagLib</h2>

<p><a href="http://developer.kde.org/~wheeler/taglib.html">TagLib</a> is a library for reading and editing the meta-data of several popular audio formats (MP3, FLAC, etc). At the time of this writing, the latest version is 1.5. Let's get the source, build it and install it:</p>

<pre><code>ubuntu% wget http://developer.kde.org/~wheeler/files/src/taglib-1.5.tar.gz
ubuntu% tar xvfz taglib-1.5.tar.gz
ubuntu% cd taglib-1.5
ubuntu% ./configure --prefix=/usr/local
ubuntu% make
ubuntu% sudo make install</code></pre>

<h2>5) Installing live555</h2>

<p><a href="http://www.live555.com/liveMedia/">live555</a> is a set of libraries for multimedia streaming (RTP/RTCP, RTSP, SIP).</p>

<pre><code>ubuntu% wget http://www.live555.com/liveMedia/public/live555-latest.tar.gz
ubuntu% tar xvfz live555-latest.tar.gz
ubuntu% cd live
ubuntu% ./genMakefiles linux
ubuntu% make</code></pre>

<p>There is no installation procedure for live555. You have to copy the full directory somewhere safe, like /usr/lib.</p>

<pre><code>ubuntu% sudo cp -r live /usr/lib</code></pre>

<h2>6) Installing everything else</h2>

<p>Now, let's use APT to fetch all the remaining libraries needed by VLC, as well as the Qt4 packages required by the GUI:</p>

<pre><code>ubuntu% sudo apt-get install libavc1394-dev libraw1394-dev libdc1394-dev libdvdread-dev libdvdnav-dev libdvdcss2-dev libfaad-dev libtwolame-dev liba52-dev libvcdinfo-dev libiso9660-dev libcddb2-dev libflac-dev libschroedinger-dev liba52-dev libogg-dev libvorbis-dev liblua5.1-0-dev libgnomevfs2-dev libtag1-dev libqt4-dev</code></pre>

<p>That should really be it...</p>

<h2>7) Fetching VLC</h2>

<p>Stable sources can be downloaded as a tarball from the <a href="http://www.videolan.org/vlc/download-sources.html">VLC download page</a>. At the time of this writing, the latest version is <a href="http://download.videolan.org/pub/videolan/vlc/0.9.8a/vlc-0.9.8a.tar.bz2">VLC 0.9.8a</a>. If you want to try development snapshots, be my guest but YMMV!</p>

<pre><code>ubuntu% wget http://download.videolan.org/pub/videolan/vlc/0.9.8a/vlc-0.9.8a.tar.bz2
ubuntu% bzip2 -d vlc-0.9.8a.tar.bz2
ubuntu% tar xvf vlc-0.9.8a.tar</code></pre>

<h2>8) Adding ffmpeg, x264 and live555 to the mix</h2>

<p>For the sake of convenience, let's copy the three build directories into the VLC tree:</p>

<pre><code>ubuntu% cd vlc-0.9.8a
ubuntu% cp -r $YOUR_FFMPEG_BUILD_DIR extras
ubuntu% cp -r $YOUR_X264_BUILD_DIR extras
ubuntu% cp -r $YOUR_LIVE555_BUILD_DIR extras
ubuntu% ls extras
analyser  buildsystem  contrib  ffmpeg  live  misc  package  x264</code></pre>

<h2>9) Building VLC</h2>

<p>Let's go! Don't forget to check your configure output for possible errors.</p>

<p><strong>[Updated on 2009/02/23: added support for XVID & FLV formats through ffmpeg]</strong></p>

<pre><code>ubuntu% ./configure --prefix=/usr/local --with-ffmpeg-tree=extras/ffmpeg --with-x264-tree=extras/x264 --with-live555-tree=extras/live --enable-release --enable-switcher --enable-shout --enable-dc1394 --enable-dv --enable-dvdread --enable-v4l --enable-pvr --enable-gnomevfs --enable-vcdx --enable-faad --enable-twolame --enable-real --enable-realrtsp --enable-flac --enable-tremor --enable-tarkin --enable-theora --enable-ogg --enable-vorbis --enable-a52 --enable-gnomevfs --enable-dca --with-ffmpeg-flv --with-ffmpeg-xvid</code></pre>

<p><em>UNIX-related output removed</em></p>

<p>All right, let's run make and get some coffee while VLC is building:</p>

<pre><code>ubuntu% make
lots of output removed
make[2]: Leaving directory `/home/julien/tmp/vlc-0.9.8a'
make[1]: Leaving directory `/home/julien/tmp/vlc-0.9.8a'</code></pre>

<p>We're done! Let's check our new VLC before we install it.</p>

<h2>10) Checking VLC</h2>

<pre><code>ubuntu% ./vlc --version
VLC media player 0.9.8a Grishenko
[00000001] main libvlc debug: VLC media player - version 0.9.8a Grishenko - (c) 1996-2008 the VideoLAN team
[00000001] main libvlc debug: libvlc was configured with ./configure  '--prefix=/usr/local' '--with-ffmpeg-tree=extras/ffmpeg' '--with-x264-tree=extras/x264' '--with-live555-tree=extras/live' '--enable-release' '--enable-switcher' '--enable-shout' '-enable-dc1394' '--enable-dv' '--enable-dvdread' '--enable-v4l' '--enable-pvr' '--enable-gnomevfs' '--enable-vcdx' '--enable-faad' '--enable-twolame' '--enable-real' '--enable-realrtsp' '--enable-flac' '--enable-tremor' '--enable-tarkin' '--enable-theora' '--enable-ogg' '--enable-vorbis' '--enable-a52' '--enable-gnomevfs' '--with-ffmpeg-flv' '--with-ffmpeg-xvid'
[00000001] main libvlc debug: translation test: code is "C"
VLC version 0.9.8a Grishenko
Compiled by julien@ubuntu.
Compiler: gcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu3)
This program comes with NO WARRANTY, to the extent permitted by law.
You may redistribute it under the terms of the GNU General Public License;
see the file named COPYING for details.
Written by the VideoLAN team; see the AUTHORS file.</code></pre>

<p>Looks good. You can verify that your favorite codecs are supported with 'vlc --list', e.g.:</p>

<pre><code>ubuntu% ./vlc --list|grep -i h264
output removed
h264                  H264 video demuxer
packetizer_h264       H.264 video packetizer
h264                  H264 video demuxer
packetizer_h264       H.264 video packetizer</code></pre>

<p>Let's also run a quick transcoding test:</p>

<pre><code>ubuntu% ./cvlc  file://clip.mov --sout="#transcode{vcodec=h264,vb=1024,acodec=mpga,ab=128}:std{access=file,mux=mp4,dst=clip.mp4}" vlc://quit
VLC media player 0.9.8a Grishenko
output removed
x264 [info]: using SAR=53889/54000
x264 [info]: using cpu capabilities: MMX2 SSE2Fast SSSE3 Cache64
x264 [info]: profile Main, level 5.1
x264 [info]: slice I:141   Avg QP:20.66  size: 14629
x264 [info]: slice P:4027  Avg QP:24.82  size:  8194
x264 [info]: mb I  I16..4: 46.2%  0.0% 53.8%
x264 [info]: mb P  I16..4: 19.5%  0.0% 23.0%  P16..4: 18.3% 11.5%  2.4%  0.0%  0.0%    skip:25.4%
x264 [info]: kb/s:1009.4
[00000499] dummy demux: command `quit'
ubuntu% ls -l clip*
-rw-r--r-- 1 julien julien 91322704 2008-12-25 22:08 clip.mov
-rw-r--r-- 1 julien julien 39719104 2008-12-25 22:17 clip.mp4</code></pre>

<p>And since VLC can play that new mp4 clip, I declare this a good build :) Let's install it:</p>

<pre><code>ubuntu% sudo make install</code></pre>

<p>We're done. Now you can enjoy all your media files with a single player!</p>
        </div>
      </article>
    </main>

    <footer>
      <nav>
        <a href="../../index.html">Home</a>
        <a href="../../experience.html">Experience</a>
        <a href="../../publications.html">Publications</a>
        <a href="../../code.html">Code</a>
        <a href="../../books.html">Books</a>
        <a href="../../youtube.html">YouTube</a>
        <a href="../../computers.html">Computers</a>
        <a href="../../legacy-posts.html">Legacy Posts</a>
      </nav>
    </footer>
  </div>

  <script src="../../js/main.js"></script>
</body>
</html>