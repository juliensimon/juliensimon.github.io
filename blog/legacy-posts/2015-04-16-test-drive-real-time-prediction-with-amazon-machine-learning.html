<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test drive: real-time prediction with Amazon Machine Learning - Julien Simon</title>
  <link rel="stylesheet" href="../../css/styles.css">
  <link rel="stylesheet" href="../../css/social-icons.css">
  <link rel="icon" type="image/x-icon" href="../../assets/favicon.ico">
</head>
<body>
  <div class="container">
    <header>
      <img src="../../assets/julien.webp" alt="Julien Simon" class="profile-image">
      <h1>Julien Simon</h1>
      <p class="title">Chief Evangelist @ Arcee AI</p>
      <p class="subtitle">World Expert in Practical AI</p>
    </header>

    <main>
      <article class="legacy-post">
        <header class="legacy-post-header">
          <h1 class="legacy-post-title">Test drive: real-time prediction with Amazon Machine Learning</h1>
          <div class="legacy-post-meta">
            <span class="legacy-post-date">January 5, 2009</span>
            <span class="legacy-post-category">Cloud & AWS</span>
          </div>
        </header>
        
        <div class="legacy-post-content">
 
          
          <p><div class="separator" style="clear: both; text-align: center;">
<img src="http://carzz.co/insane-flames-lambo-top-gear-hot-cars-motorized-vehicles-cars-t_194875.jpg" alt="Screenshot" style="max-width: 100%; height: auto;">
        
        </div>
As explained in my <a href="../../legacy-posts/2015/04/test-drive-aws-machine-learning-redshift.html" target="_blank">previous article, Amazon ML supports both batch prediction and real-time prediction.</p>

<p>I burned some rubber (and some cash!) on batch prediction, but there's still some gas in the tank and tires ain't totally dead yet, so let's do a few more laps and see how the real-time thing works :)</p>

<p>Assuming you've already built and evaluated a model, one single operation is required to perform real-time prediction: create a real-time endpoint, i.e. a web service URL to send your requests to.</p>

<p>Of course, we could to this in the AWS console, but why not use the CLI instead?&nbsp; A word of warning: at the time of writing, the CLI package available from the AWS website suffers from a nasty bug on prediction calls (see <a href="https://forums.aws.amazon.com/thread.jspa?messageID=615018">https://forums.aws.amazon.com/thread.jspa?messageID=615018). You'll need to download and install the latest version from Github:</p>

<script src="https://gist.github.com/juliensimon/050948f43d42894ccc41.js"></script>

<p>While we're at it, let's take a quick look at the CLI for Amazon ML. Here's our model, built from 100,000 lines with the format described in my previous article:</p>

<script src="https://gist.github.com/juliensimon/1b3bad080dda5fba87c1.js"></script>

<p>Let's also look at the evaluation for this model. The log file URL gives away the fact Amazon ML jobs are based on EMR... in case you had any doubts ;)</p>

<p>&nbsp;<script src="https://gist.github.com/juliensimon/932740ca93c55a175a60.js"></script></p>

<p>All right, everything looks good. Time to create a prediction endpoint for our model:</p>

<script src="https://gist.github.com/juliensimon/e5122d8f0b249a0f601a.js"></script>

<p>Pretty simple. We can now see that our model is accessible at <em>https://realtime.machinelearning.us-east-1.amazonaws.com</em></p>

<script src="https://gist.github.com/juliensimon/730b6e69f7548d559df9.js"></script>

<p>And now, the moment of truth: let's hit the endpoint with a record.</p>

<script src="https://gist.github.com/juliensimon/1b76c384ea6bd187bb72.js"></script>

<p>Boom. We got a predicted value. This actually worked on the first call, I guess caffeine was stronger this morning ;)</p>

<p>One last question for today: how fast is this baby? I tested two different setups :</p>

<ul>
<li>Return trip between my office in Paris and the endpoint in <em>us-east-1 </em>: about 700 ms</li>
<li>Return trip between an EC2 instance in <em>us-east-1</em> and the endpoint in <em>us-east-1 </em>: about 300 ms</li>
</ul>

<script src="https://gist.github.com/juliensimon/17f9cc88a3c0f70725b6.js"></script>

<p>(<em>and yes, I did run the tests multiple times. These numbers are average values</em>).</p>

<p>Slower than expected. The <a href="https://aws.amazon.com/fr/machine-learning/faqs/" target="_blank">Amazon ML FAQ says:</p>

<p><em><strong>Q: How fast can the Amazon Machine Learning real-time API generate predictions?</strong></em></p>

<p><em> 
          Most real-time prediction requests return a response within
 100 MS, making them fast enough for interactive web, mobile, or desktop
 applications. The exact time it takes for the real-time API to generate
 a prediction varies depending on the size of the input data record, and
 the complexity of the data processing “recipe” associated with the ML 
model that is generating the predictions</em></p>

<p>300 ms feels slow, especially since my model doesn't strike me as super-complicated. Maybe I'm jaded ;)</p>

<p>Ok, enough bitching :) This product has only been out a week or so and it's already fuckin' AWESOME. It's hard to believe Amazon made ML this simple. If I can get this to work, anyone can.</p>

<p>Given the right level of price, performance and scale (all will come quickly), I see this product&nbsp; crushing the competition... and not only other ML SaaS providers. Hardware &amp; software vendors should start sweating even more than they already do.</p>

<p>C'mon, give this thing a try and tell me you're STILL eager to build Hadoop clusters and write Map-Reduce jobs. Seriously?</p>

<p>Till next time, keep rockin'.</p>
        </div>
      </article>
    </main>

    <footer>
      <nav>
        <a href="../../index.html">Home</a>
        <a href="../../experience.html">Experience</a>
        <a href="../../publications.html">Publications</a>
        <a href="../../code.html">Code</a>
        <a href="../../books.html">Books</a>
        <a href="../../youtube.html">YouTube</a>
        <a href="../../computers.html">Computers</a>
        <a href="../../legacy-posts.html">Legacy Posts</a>
      </nav>
    </footer>
  </div>

  <script src="../../js/main.js"></script>
</body>
</html>