<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  
  <!-- Primary Meta Tags -->
  <title>Amazon Personalize – Real-Time Personalization and Recommendation for Everyone - Julien Simon | AWS Expert</title>

<!-- Umami Analytics -->
<script defer src="https://cloud.umami.is/script.js" data-website-id="27550dad-d418-4f5d-ad1b-dab573da1020"></script>
<link rel="dns-prefetch" href="//cloud.umami.is">
  <meta name="title" content="Amazon Personalize – Real-Time Personalization and Recommendation for Everyone - Julien Simon | AWS Expert"/>
  <meta name="description" content="Expert analysis and technical deep-dive on amazon personalize – real-time personalization and recommendation for everyone by Julien Simon, leading AWS expert and former Global Technical Evangelist for AI & ML at Amazon Web Services."/>
  <meta name="keywords" content="AWS, Amazon Web Services, ['Amazon', 'Personalize', '–'], machine learning, AI, cloud computing, Julien Simon, AWS expert"/>
  <meta name="author" content="Julien Simon"/>
  <meta name="robots" content="index, follow"/>
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article"/>
  <meta property="og:url" content="https://julien.org/blog/amazon-personalize-real-time-personalization-and-recommendation-for-everyone/"/>
  <meta property="og:title" content="Amazon Personalize – Real-Time Personalization and Recommendation for Everyone - Julien Simon | AWS Expert"/>
  <meta property="og:description" content="Expert analysis and technical deep-dive on amazon personalize – real-time personalization and recommendation for everyone by Julien Simon, leading AWS expert and former Global Technical Evangelist for AI & ML at Amazon Web Services."/>
  <meta property="og:image" content="https://julien.org/assets/julien-simon-aws-expert.jpg"/>
  <meta property="og:site_name" content="Julien Simon - AWS Expert"/>
  <meta property="article:author" content="Julien Simon"/>
  <meta property="article:published_time" content="2018-11-28T00:00:00Z"/>
  <meta property="article:section" content="AWS"/>
  <meta property="article:tag" content="AWS, Amazon Web Services, Machine Learning, AI"/>
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image"/>
  <meta property="twitter:url" content="https://julien.org/blog/amazon-personalize-real-time-personalization-and-recommendation-for-everyone/"/>
  <meta property="twitter:title" content="Amazon Personalize – Real-Time Personalization and Recommendation for Everyone - Julien Simon | AWS Expert"/>
  <meta property="twitter:description" content="Expert analysis and technical deep-dive on amazon personalize – real-time personalization and recommendation for everyone by Julien Simon, leading AWS expert and former Global Technical Evangelist for AI & ML at Amazon Web Services."/>
  <meta property="twitter:image" content="https://julien.org/assets/julien-simon-aws-expert.jpg"/>
  <meta property="twitter:creator" content="@julsimon"/>
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://julien.org/blog/amazon-personalize-real-time-personalization-and-recommendation-for-everyone/"/>
  
  <!-- Author and Publisher -->
  <link rel="author" href="https://julien.org/"/>
  <link rel="publisher" href="https://julien.org/"/>
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Amazon Personalize – Real-Time Personalization and Recommendation for Everyone",
    "description": "Expert analysis and technical deep-dive on amazon personalize – real-time personalization and recommendation for everyone by Julien Simon, leading AWS expert and former Global Technical Evangelist for AI & ML at Amazon Web Services.",
    "image": "https://julien.org/assets/julien-simon-aws-expert.jpg",
    "author": {
      "@type": "Person",
      "name": "Julien Simon",
      "url": "https://julien.org/",
      "jobTitle": "AWS Expert & Former Global Technical Evangelist",
      "worksFor": {
        "@type": "Organization",
        "name": "Amazon Web Services"
      },
      "sameAs": [
        "https://twitter.com/julsimon",
        "https://linkedin.com/in/juliensimon",
        "https://github.com/juliensimon"
      ]
    },
    "publisher": {
      "@type": "Organization",
      "name": "Julien Simon",
      "url": "https://julien.org/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://julien.org/assets/julien-simon-logo.jpg"
      }
    },
    "datePublished": "2018-11-28T00:00:00Z",
    "dateModified": "2018-11-28T00:00:00Z",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://julien.org/blog/amazon-personalize-real-time-personalization-and-recommendation-for-everyone/"
    },
    "url": "https://julien.org/blog/amazon-personalize-real-time-personalization-and-recommendation-for-everyone/",
    "keywords": "AWS, Amazon Web Services, ['Amazon', 'Personalize', '–'], machine learning, AI, cloud computing, Julien Simon, AWS expert",
    "articleSection": "AWS",
    "inLanguage": "en-US",
    "isPartOf": {
      "@type": "Blog",
      "name": "Julien Simon - AWS Expert Blog",
      "url": "https://julien.org/blog/"
    }
  }
  </script>
  
  <!-- Additional SEO Meta Tags -->
  <meta name="twitter:site" content="@julsimon"/>
  <meta name="twitter:creator" content="@julsimon"/>
  <meta name="theme-color" content="#FF9900"/>
  <meta name="msapplication-TileColor" content="#FF9900"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  
  <!-- Preconnect to external domains -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="https://julien.org/favicon.ico"/>
  <link rel="apple-touch-icon" href="https://julien.org/apple-touch-icon.png"/>
  
  <style>
   body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 2em;
            margin-bottom: 0.5em;
        }
        h1 { font-size: 2.5em; }
        h2 { font-size: 2em; }
        h3 { font-size: 1.5em; }
        img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin: 1em 0;
        }
        /* Image alignment classes for text wraparound */
        img.alignleft {
            float: left;
            margin: 0.5em 1.5em 1em 0;
        }
        img.alignright {
            float: right;
            margin: 0.5em 0 1em 1.5em;
        }
        img.aligncenter {
            display: block;
            margin: 1em auto;
            float: none;
        }
        img.alignnone {
            float: none;
            margin: 1em 0;
        }
        /* Clear floats after images */
        .wp-block-image::after,
        p:has(img.alignleft)::after,
        p:has(img.alignright)::after {
            content: "";
            display: table;
            clear: both;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 1em;
            overflow-x: auto;
        }
        code {
            background: #f8f9fa;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Monaco', 'Consolas', monospace;
        }
        blockquote {
            border-left: 4px solid #3498db;
            margin: 1em 0;
            padding-left: 1em;
            font-style: italic;
            color: #7f8c8d;
        }
        a {
            color: #3498db;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        p {
            margin-bottom: 1em;
        }
        .author-bio {
            background: #f8f9fa;
            border-left: 4px solid #FF9900;
            padding: 1em;
            margin: 2em 0;
            border-radius: 4px;
        }
        .author-bio h3 {
            margin-top: 0;
            color: #FF9900;
        }
        
  </style>
 </head>
 <body>
  <div style="margin-bottom: 1em;">
  <a href="../../../aws-blog-posts.html" style="color: #FF9900; text-decoration: none; font-size: 0.9em;">← Back to AWS Blog Posts</a>
</div>
  
  <h1>Amazon Personalize – Real-Time Personalization and Recommendation for Everyone</h1>
  
    
  
  <p style="color: #666; font-style: italic; margin-bottom: 1em;">
   Published: 2018-11-28 | Originally published at <a href="https://aws.amazon.com/blogs/aws/amazon-personalize-real-time-personalization-and-recommendation-for-everyone/" target="_blank" rel="noopener noreferrer">AWS Blog</a>
  </p>
 <body>
  <p>
   Machine learning definitely offers a wide range of exciting topics to work on, but there’s nothing quite like personalization and recommendation.
  </p>
  <p>
   At first glance, matching users to items that they may like sounds like a simple problem. However, the task of developing an efficient recommender system is challenging. Years ago, Netflix even ran a movie recommendation competition with a $1 Million award! Indeed, building, optimizing and deploying real-time personalization today requires specialized expertise in analytics, applied machine learning, software engineering, and systems operations. Few organizations have the knowledge, skills, and experience to overcome these challenges, and they either abandon the idea of using recommendation or build under-performing models.
  </p>
  <p>
   For over 20 years, Amazon.com has built recommender systems at scale, integrating personalized recommendations across the buying experience – from product discovery to checkout.
  </p>
  <p>
   To help all AWS customers do the same, we are very happy to announce
   <a href="https://aws.amazon.com/personalize/">
    Amazon Personalize
   </a>
   , a fully-managed service that puts personalization and recommendation in the hands of developers with little machine learning experience.
  </p>
  <p>
   <span style="text-decoration: underline;">
    Introducing Amazon Personalize
   </span>
  </p>
  <p>
   How does Amazon Personalize simplify personalization and recommendation? As explained in a previous
   <a href="https://aws.amazon.com/blogs/machine-learning/build-a-movie-recommender-with-factorization-machines-on-amazon-sagemaker/">
    blog post
   </a>
   , you could already build recommendation models on
   <a href="http://aws.amazon.com/sagemaker" rel="noopener noreferrer" target="_blank">
    Amazon SageMaker
   </a>
   using algorithms such as
   <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/fact-machines.html">
    Factorization Machines
   </a>
   . However, it’s fair to say that this requires extensive data preparation and expert tuning in order to get good results.
  </p>
  <p>
   Creating a recommendation model with Amazon Personalize is much simpler. Using AutoML, a new process that automates complex machine learning tasks, Personalize performs and accelerates the difficult work required to design, train, and deploy a machine learning model.
  </p>
  <p>
   Amazon Personalize supports both datasets stored in Amazon S3 and streaming data sets, e.g. events sent in real-time from a JavaScript tracker or server-side. The high-level process looks like this:
  </p>
  <ol>
   <li>
    Create a schema describing the dataset, using Personalize-reserved keywords for user ids, item ids, etc.
   </li>
   <li>
    Create a dataset group that contains datasets used for building the model and for predicting: user-item interactions (aka “who liked what”), users and items. The last two are optional, as we will see in the example below.
   </li>
   <li>
    Send data to Personalize.
   </li>
   <li>
    Create a solution, i.e. select a recommendation recipe and train it on the dataset group.
   </li>
   <li>
    Create a campaign to predict new samples.
   </li>
  </ol>
  <p>
   With data stored in Amazon S3, sending data to Personalize simply means adding your data files to the dataset group. Ingestion is triggered automatically.
  </p>
  <p>
   Working with streaming data is different. One way to send events would be to use the
   <a href="https://aws-amplify.github.io/">
    AWS Amplify
   </a>
   JavaScript library, which is integrated with the event tracking service in Personalize. Another way would be to send them server-side via the AWS SDK in your favourite language: ingestion can happen from any source with the code hosted inside of AWS (e.g. in Amazon EC2 or AWS Lambda) or outside.
  </p>
  <p>
   Time for an example. Let’s build a solution based on the
   <a href="https://movielens.org/">
    MovieLens
   </a>
   dataset!
  </p>
  <p>
   <span style="text-decoration: underline;">
    The MovieLens dataset
   </span>
  </p>
  <p>
   MovieLens is a well-known dataset storing movies recommendations. It comes in different sizes and formats: here, we will use
   <a href="https://grouplens.org/datasets/movielens/20m/">
    ml-20m
   </a>
   , which contains 20 million ratings applied to 27,000 movies by 138,000 users.
  </p>
  <p>
   This dataset contains a file named ‘ratings.csv’ storing user-item interactions. The first lines look like this.
  </p>
  <pre><code class="lang-bash">userId,movieId,rating,timestamp
1,2,3.5,1112486027
1,29,3.5,1112484676
1,32,3.5,1112484819
1,47,3.5,1112484727
1,50,3.5,1112484580
</code></pre>
  <p>
   It reads like this: user 1 gave movie 2 a 3.5 rating. Same for movies 29, 32, 47, 50 and so on! This is exactly what we need to build a recommendation model. Let’s get to work.
  </p>
  <p>
   <span style="text-decoration: underline;">
    Creating a schema for the dataset
    <br/>
   </span>
  </p>
  <p>
   The first step is to create an
   <a href="https://avro.apache.org/">
    Avro
   </a>
   schema for this dataset. This is pretty straightforward, we just need to use some of the keywords defined in Amazon Personalize.
  </p>
  <pre><code class="lang-json">{"type": "record", 
"name": "Interactions", 
"namespace": "com.amazonaws.personalize.schema",
"fields":[
    {"name": "ITEM_ID", "type": "string"},
    {"name": "USER_ID", "type": "string"},
    {"name": "TIMESTAMP", "type": "long"}
],
"version": "1.0"}</code></pre>
  <p>
   <span style="text-decoration: underline;">
    Preparing the dataset
   </span>
  </p>
  <p>
   Once we’ve downloaded and unzipped the dataset, let’s load the ‘ratings.csv’ file and apply the following processing:
  </p>
  <ul>
   <li>
    Shuffle reviews.
   </li>
   <li>
    Keep only movies rated 4 and above, and drop the ratings columns: we just want our model to recommend movies that users should really like.
   </li>
   <li>
    Rename columns to the names used in the schema.
   </li>
   <li>
    Keep only 100,000 interactions to minimize training time (this is just a demo after all!).
   </li>
  </ul>
  <p>
   All of this is easily achieved with the
   <a href="https://pandas.pydata.org/">
    Pandas
   </a>
   Python library, the Swiss Army knife for columnar data processing. While we’re at it, we’ll also upload the processed file to an Amazon S3 bucket.
  </p>
  <pre><code class="lang-python">import pandas, boto3 
from sklearn.utils import shuffle
ratings = pandas.read_csv('ratings.csv')
ratings = shuffle(ratings)
ratings = ratings[ratings['rating']&gt;3.6]
ratings = ratings.drop(columns='rating')
ratings.columns = ['USER_ID','ITEM_ID','TIMESTAMP']
ratings = ratings[:100000]
ratings.to_csv('ratings.processed.csv',index=False)
s3 = boto3.client('s3')
s3.upload_file('ratings.processed.csv','jsimon-ml20m','ratings.processed.csv')</code><code class="lang-json" style="text-decoration: underline;"></code></pre>
  <p>
   <span style="text-decoration: underline;">
    Creating the dataset group
    <br/>
   </span>
  </p>
  <p>
   First, we need to create a dataset group containing the user-item dataset as well as its schema. Let’s do this with the AWS CLI: as you’ll see, a lot of these CLI operations require Amazon Resource Names (ARNs) output by a previous call, so make sure you keep track of everything when you experiment.
  </p>
  <pre><code class="lang-bash">$ aws personalize create-dataset-group --name jsimon-ml20m-dataset-group
$ aws personalize create-schema --name jsimon-ml20m-schema \
--schema file://jsimon-ml20m-schema.json
$ aws personalize create-dataset --schema-arn $SCHEMA_ARN \
--dataset-group-arn $DATASET_GROUP_ARN \
--dataset-type INTERACTIONS 
</code></pre>
  <p>
   <span style="text-decoration: underline;">
    Importing datasets
   </span>
  </p>
  <p>
   In this simple example, we’ll import data on-demand. It’s also possible to schedule import jobs in order to load new data regularly. We need to pass a role allowing data to be read from the Amazon S3 bucket.
  </p>
  <pre><code class="lang-bash">$ aws personalize create-dataset-import-job --job-name jsimon-ml20m-job \
--role-arn $ROLE_ARN
--dataset-arn $DATASET_ARN \
--data-source dataLocation=s3://jsimon-ml20m/ratings.processed.csv</code></pre>
  <p>
   This will take a little while and we can use the
   <em>
    describe-dataset-import-job
   </em>
   API to check for completion. Plenty of information is returned, but let’s just query the import status.
  </p>
  <pre><code class="lang-bash">$ aws personalize describe-dataset-import-job \
--dataset-import-job-arn $DATASET_IMPORT_JOB_ARN \
--query "datasetImportJob.latestDatasetImportJobRun.status"
"CREATE IN_PROGRESS"</code></pre>
  <p>
   <span style="text-decoration: underline;">
    Putting it all together: creating a solution
    <br/>
   </span>
  </p>
  <p>
   Once datasets have been imported, we need to select a recipe to cook our recommendation model. A recipe is much more than an algorithm: it also includes predefined feature transformation, initial parameters for the algorithm as well as automatic model tuning. Thus, recipes remove the need to have expertise in personalization.
  </p>
  <p>
   Amazon Personalize comes with several recipes suitable for different use cases, and advanced users can also add their own recipes.
  </p>
  <p>
   Here’s the list of available recipes.
  </p>
  <pre><code class="lang-bash">arn:aws:personalize:::recipe/awspersonalizehrnnmodel
arn:aws:personalize:::recipe/awspersonalizehrnnmodel-for-coldstart
arn:aws:personalize:::recipe/awspersonalizehrnnmodel-for-metadata
arn:aws:personalize:::recipe/awspersonalizeffnnmodel
arn:aws:personalize:::recipe/awspersonalizedeepfmmodel
arn:aws:personalize:::recipe/awspersonalizesimsmodel
arn:aws:personalize:::recipe/search-personalization
arn:aws:personalize:::recipe/popularity-baseline</code></pre>
  <p>
   Recommendation experts will certainly enjoy the flexibility that they bring, but what about developers who are new to the topic?
  </p>
  <p>
   As mentioned earlier, Amazon Personalize supports AutoML, a new technique that automatically searches for the most optimal recipe, so let’s enable it. Hyper parameter optimization is enabled by default. Last but not least, Amazon Personalize solutions can scale automatically according to incoming traffic: we simply need to define the minimum number to transactions per second (TPS) that we want to support.
  </p>
  <p>
   Thus, we can create the solution like so:
  </p>
  <p>
   <code class="lang-bash">
    $ aws personalize create-solution --name jsimon-ml20m-solution \
    <br/>
   </code>
   <code class="lang-bash">
    --minTPS 10 --perform-auto-ml \
    <br/>
   </code>
   <code class="lang-bash">
    --dataset-group-arn $DATASET_GROUP_ARN \
    <br/>
    --query 'solution.status'
    <br/>
    "CREATE IN_PROGRESS"
   </code>
   <code class="lang-bash">
   </code>
  </p>
  <p>
   This will take a little while as the optimal recipe is selected, trained and tuned. Once all of this is complete, we can look at solution metrics.
  </p>
  <pre><code class="lang-bash">$ aws personalize get-metrics --solution-arn $SOLUTION_ARN</code></pre>
  <p>
   <span style="text-decoration: underline;">
    Recommending new items in real-time
   </span>
  </p>
  <p>
   If we’re happy with the model, we can now create a campaign in order to deploy it. It will be updated automatically every time the solution is deployed.
  </p>
  <pre><code class="lang-bash">$ aws personalize create-campaign --name jsimon-ml20m-solution \
--solution-arn $SOLUTION_ARN --update-mode AUTO</code></pre>
  <p>
   Now, let’s recommend some movies.
  </p>
  <pre><code class="lang-bash">$ aws personalize-rec get-recommendations --campaign-arn $CAMPAIGN_ARN \
--user-id $USER_ID --query "itemList[*].itemId"
["1210", "260", "2571", "110", "296", "1193", ...]</code></pre>
  <p>
   That’s it! As you can see, we successfully built a recommendation model with a few API calls. All we had to do was define a schema and upload the dataset. We relied on Amazon Personalize to select the best recipe with AutoML, and to optimize its hyper parameters. The solution was trained and deployed on fully-managed infrastructure, letting us focus even more on building our application.
  </p>
  <p>
   <span style="text-decoration: underline;">
    Sign up for the preview now!
    <br/>
   </span>
  </p>
  <p>
   I hope this post was informative. We just scratched the surface of what Amazon Personalize can do. The service is available in preview in US-East (Virginia) and US-West (Oregon).
  </p>
  <p>
   There is no charge for the service during the preview. Once the preview is complete, the service will be part of the
   <a href="https://aws.amazon.com/free/">
    AWS free tier
   </a>
   . For the first two months after sign-up, you will be offered:
   <br/>
   1. Data processing and storage: Up to 20 GB per month
   <br/>
   2. Training: Up to 100 training hours per month
   <br/>
   3. Inference: Up to 50 TPS-hours of real-time recommendations per month
  </p>
  <p>
   To get started, visit
   <a href="https://aws.amazon.com/personalize/">
    aws.amazon.com/personalize/
   </a>
   . Now it’s your turn to try it and let us know what you think.
  </p>
  <p>
   —
   <a href="https://twitter.com/julsimon">
    Julien
   </a>
   ;
  </p>
  <!-- '"` -->
  <hr/>
  <h3>
   About the Author
  </h3>
  <p>
   <strong>
    Julien is the Artificial Intelligence &amp; Machine Learning Evangelist for EMEA
   </strong>
   . He focuses on helping developers and enterprises bring their ideas to life. In his spare time, he reads the works of JRR Tolkien again and again.
  </p>
  <p>
  </p>
  <p>
  </p>
  <p>
  </p>
  <!-- '"` -->
 
  
  </body>
 </html>