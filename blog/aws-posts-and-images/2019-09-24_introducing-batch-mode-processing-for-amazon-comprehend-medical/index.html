<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  
  <!-- Primary Meta Tags -->
  <title>Introducing Batch Mode Processing for Amazon Comprehend Medical - Julien Simon | AWS Expert</title>

<!-- Umami Analytics -->
<script defer src="https://cloud.umami.is/script.js" data-website-id="27550dad-d418-4f5d-ad1b-dab573da1020"></script>
<link rel="dns-prefetch" href="//cloud.umami.is">
  <meta name="title" content="Introducing Batch Mode Processing for Amazon Comprehend Medical - Julien Simon | AWS Expert"/>
  <meta name="description" content="Expert analysis and technical deep-dive on introducing batch mode processing for amazon comprehend medical by Julien Simon, leading AWS expert and former Global Technical Evangelist for AI & ML at Amazon Web Services."/>
  <meta name="keywords" content="AWS, Amazon Web Services, ['Introducing', 'Batch', 'Mode'], machine learning, AI, cloud computing, Julien Simon, AWS expert"/>
  <meta name="author" content="Julien Simon"/>
  <meta name="robots" content="index, follow"/>
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article"/>
  <meta property="og:url" content="https://julien.org/blog/introducing-batch-mode-processing-for-amazon-comprehend-medical/"/>
  <meta property="og:title" content="Introducing Batch Mode Processing for Amazon Comprehend Medical - Julien Simon | AWS Expert"/>
  <meta property="og:description" content="Expert analysis and technical deep-dive on introducing batch mode processing for amazon comprehend medical by Julien Simon, leading AWS expert and former Global Technical Evangelist for AI & ML at Amazon Web Services."/>
  <meta property="og:image" content="https://julien.org/assets/julien-simon-aws-expert.jpg"/>
  <meta property="og:site_name" content="Julien Simon - AWS Expert"/>
  <meta property="article:author" content="Julien Simon"/>
  <meta property="article:published_time" content="2019-09-24T00:00:00Z"/>
  <meta property="article:section" content="AWS"/>
  <meta property="article:tag" content="AWS, Amazon Web Services, Machine Learning, AI"/>
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image"/>
  <meta property="twitter:url" content="https://julien.org/blog/introducing-batch-mode-processing-for-amazon-comprehend-medical/"/>
  <meta property="twitter:title" content="Introducing Batch Mode Processing for Amazon Comprehend Medical - Julien Simon | AWS Expert"/>
  <meta property="twitter:description" content="Expert analysis and technical deep-dive on introducing batch mode processing for amazon comprehend medical by Julien Simon, leading AWS expert and former Global Technical Evangelist for AI & ML at Amazon Web Services."/>
  <meta property="twitter:image" content="https://julien.org/assets/julien-simon-aws-expert.jpg"/>
  <meta property="twitter:creator" content="@julsimon"/>
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://julien.org/blog/introducing-batch-mode-processing-for-amazon-comprehend-medical/"/>
  
  <!-- Author and Publisher -->
  <link rel="author" href="https://julien.org/"/>
  <link rel="publisher" href="https://julien.org/"/>
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Introducing Batch Mode Processing for Amazon Comprehend Medical",
    "description": "Expert analysis and technical deep-dive on introducing batch mode processing for amazon comprehend medical by Julien Simon, leading AWS expert and former Global Technical Evangelist for AI & ML at Amazon Web Services.",
    "image": "https://julien.org/assets/julien-simon-aws-expert.jpg",
    "author": {
      "@type": "Person",
      "name": "Julien Simon",
      "url": "https://julien.org/",
      "jobTitle": "AWS Expert & Former Global Technical Evangelist",
      "worksFor": {
        "@type": "Organization",
        "name": "Amazon Web Services"
      },
      "sameAs": [
        "https://twitter.com/julsimon",
        "https://linkedin.com/in/juliensimon",
        "https://github.com/juliensimon"
      ]
    },
    "publisher": {
      "@type": "Organization",
      "name": "Julien Simon",
      "url": "https://julien.org/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://julien.org/assets/julien-simon-logo.jpg"
      }
    },
    "datePublished": "2019-09-24T00:00:00Z",
    "dateModified": "2019-09-24T00:00:00Z",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://julien.org/blog/introducing-batch-mode-processing-for-amazon-comprehend-medical/"
    },
    "url": "https://julien.org/blog/introducing-batch-mode-processing-for-amazon-comprehend-medical/",
    "keywords": "AWS, Amazon Web Services, ['Introducing', 'Batch', 'Mode'], machine learning, AI, cloud computing, Julien Simon, AWS expert",
    "articleSection": "AWS",
    "inLanguage": "en-US",
    "isPartOf": {
      "@type": "Blog",
      "name": "Julien Simon - AWS Expert Blog",
      "url": "https://julien.org/blog/"
    }
  }
  </script>
  
  <!-- Additional SEO Meta Tags -->
  <meta name="twitter:site" content="@julsimon"/>
  <meta name="twitter:creator" content="@julsimon"/>
  <meta name="theme-color" content="#FF9900"/>
  <meta name="msapplication-TileColor" content="#FF9900"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  
  <!-- Preconnect to external domains -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="https://julien.org/favicon.ico"/>
  <link rel="apple-touch-icon" href="https://julien.org/apple-touch-icon.png"/>
  
  <style>
   body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 2em;
            margin-bottom: 0.5em;
        }
        h1 { font-size: 2.5em; }
        h2 { font-size: 2em; }
        h3 { font-size: 1.5em; }
        img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin: 1em 0;
        }
        /* Image alignment classes for text wraparound */
        img.alignleft {
            float: left;
            margin: 0.5em 1.5em 1em 0;
        }
        img.alignright {
            float: right;
            margin: 0.5em 0 1em 1.5em;
        }
        img.aligncenter {
            display: block;
            margin: 1em auto;
            float: none;
        }
        img.alignnone {
            float: none;
            margin: 1em 0;
        }
        /* Clear floats after images */
        .wp-block-image::after,
        p:has(img.alignleft)::after,
        p:has(img.alignright)::after {
            content: "";
            display: table;
            clear: both;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 1em;
            overflow-x: auto;
        }
        code {
            background: #f8f9fa;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Monaco', 'Consolas', monospace;
        }
        blockquote {
            border-left: 4px solid #3498db;
            margin: 1em 0;
            padding-left: 1em;
            font-style: italic;
            color: #7f8c8d;
        }
        a {
            color: #3498db;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        p {
            margin-bottom: 1em;
        }
        .author-bio {
            background: #f8f9fa;
            border-left: 4px solid #FF9900;
            padding: 1em;
            margin: 2em 0;
            border-radius: 4px;
        }
        .author-bio h3 {
            margin-top: 0;
            color: #FF9900;
        }
        
  </style>
 </head>
 <body>
  <div style="margin-bottom: 1em;">
  <a href="../../../aws-blog-posts.html" style="color: #FF9900; text-decoration: none; font-size: 0.9em;">← Back to AWS Blog Posts</a>
</div>
  
  <h1>Introducing Batch Mode Processing for Amazon Comprehend Medical</h1>
  
    
  
  <p style="color: #666; font-style: italic; margin-bottom: 1em;">
   Published: 2019-09-24 | Originally published at <a href="https://aws.amazon.com/blogs/aws/introducing-batch-mode-processing-for-amazon-comprehend-medical/" target="_blank" rel="noopener noreferrer">AWS Blog</a>
  </p>
 <body>
  <p>
   <a href="https://www.youtube.com/watch?v=cJ3eUPOXV4Q">
    Launched
   </a>
   at AWS re:Invent 2018, Amazon Comprehend Medical is a HIPAA-eligible natural language processing service that makes it easy to use machine learning to extract relevant medical information from unstructured text.
  </p>
  <p>
   For example,
   <a href="https://aws.amazon.com/comprehend/medical/">
    customers
   </a>
   like
   <a href="https://diagnostics.roche.com/us/en/home.html">
    Roche Diagnostics
   </a>
   and
   <a href="https://fredhutch.org/">
    The Fred Hutchinson Cancer Research Center
   </a>
   can quickly and accurately
   <a href="https://aws.amazon.com/blogs/machine-learning/extract-and-visualize-clinical-entities-using-amazon-comprehend-medical/">
    extract information
   </a>
   , such as medical condition, medication, dosage, strength, and frequency from a variety of sources like doctors’ notes, clinical trial reports, and patient health records. They can also identify protected health information (PHI) present in these documents in order to
   <a href="https://aws.amazon.com/blogs/machine-learning/de-identify-medical-images-with-the-help-of-amazon-comprehend-medical-and-amazon-rekognition/">
    anonymize it
   </a>
   before data exchange.
  </p>
  <p>
   In a previous
   <a href="https://aws.amazon.com/blogs/aws/amazon-comprehend-medical-natural-language-processing-for-healthcare-customers/">
    blog post
   </a>
   , I showed you how to use the Amazon Comprehend Medical
   <a href="https://docs.aws.amazon.com/comprehend/latest/dg/comprehend-medical.html">
    API
   </a>
   to extract entities and detect PHI in a single document. Today we’re happy to announce that this API can now process batches of documents stored in an
   <a href="https://aws.amazon.com/s3/">
    Amazon Simple Storage Service (Amazon S3)
   </a>
   bucket. Let’s do a demo!
  </p>
  <p>
   <strong>
    <span style="text-decoration: underline;">
     Introducing the Batch Mode API
     <br/>
    </span>
   </strong>
   First, we need to grab some data to test batch mode:
   <a href="https://www.mtsamples.com">
    MT Samples
   </a>
   is a great collection of real-life anonymized medical transcripts that are free to use and distribute. I picked a few transcripts, and converted them to the simple JSON format that Amazon Comprehend Medical expects: in a production workflow, converting documents to this format could easily be done by your application code, or by one of our analytics services such as
   <a href="https://aws.amazon.com/glue/">
    AWS Glue
   </a>
   .
  </p>
  <p>
   <code>
    {"Text": " VITAL SIGNS: The patient was afebrile. He is slightly tachycardic, 105,
   </code>
   <br/>
   <code>
    but stable blood pressure and respiratory rate.GENERAL: The patient is in no distress.
   </code>
   <br/>
   <code>
    Sitting quietly on the gurney. HEENT: Unremarkable. His oral mucosa is moist and well
   </code>
   <br/>
   <code>
    hydrated. Lips and tongue look normal. Posterior pharynx is clear. NECK: Supple. His
   </code>
   <br/>
   <code>
    trachea is midline.There is no stridor. LUNGS: Very clear with good breath sounds in
   </code>
   <br/>
   <code>
    all fields. There is no wheezing. Good air movement in all lung fields.
   </code>
   <br/>
   <code>
    CARDIAC: Without murmur. Slight tachycardia. ABDOMEN: Soft, nontender.
   </code>
   <br/>
   <code>
    SKIN: Notable for a confluence erythematous, blanching rash on the torso as well
   </code>
   <br/>
   <code>
    as more of a blotchy papular, macular rash on the upper arms. He noted some on his
   </code>
   <br/>
   <code>
    buttocks as well. Remaining of the exam is unremarkable.}
   </code>
  </p>
  <p>
   Then, I simply upload the samples to an Amazon S3 bucket located in the same region as the service… and yes, ‘esophagogastroduodenoscopy’ is a word.
  </p>
  <p>
   <a href="https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2019/09/23/julsimon-comprehendmedical3.png">
    <img alt="Screenshot from Introducing Batch Mode Processing for Amazon Comprehend Medical tutorial" class="size-large wp-image-31018 aligncenter" height="489" src="image01.webp" style="border: 1px solid black;" width="1024"/>
   </a>
  </p>
  <p>
   Now let’s head to the AWS console and create a entity detection job. The rest of the process would be identical for PHI.
  </p>
  <p>
   <a href="https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2019/07/16/jsimon-cmedical-batch2.png">
    <img alt="Step 2 screenshot from Introducing Batch Mode Processing for Amazon Comprehend Medical" class="size-large wp-image-29692 aligncenter" height="428" loading="lazy" src="image02.webp" style="border: 1px solid black;" width="1024"/>
   </a>
   <br/>
   Samples are stored under the ‘
   <em>
    input
   </em>
   /’ prefix, and I’m expecting results under the ‘
   <em>
    output
   </em>
   /’ prefix. Of course, you could use different buckets if you were so inclined. Optionally, you could also use
   <a href="https://aws.amazon.com/kms/">
    AWS Key Management Service (AWS KMS)
   </a>
   to encrypt output results. For the sake of brevity, I won’t
   <a href="https://docs.aws.amazon.com/kms/latest/developerguide/services-s3.html">
    set up KMS
   </a>
   here, but you’d certainly want to consider it for production workflows.
  </p>
  <p>
   <img alt="Step 3 screenshot from Introducing Batch Mode Processing for Amazon Comprehend Medical" class="size-full wp-image-31019 aligncenter" height="407" loading="lazy" src="image03.webp" style="border: 1px solid black;" width="812"/>
  </p>
  <p>
   I also need to provide a data access role in
   <a href="https://aws.amazon.com/iam/">
    AWS Identity and Access Management (IAM)
   </a>
   , allowing Amazon Comprehend Medical to access the relevant S3 bucket(s). You can use a role that you previously set up in
   <a href="https://aws.amazon.com/iam/">
    AWS Identity and Access Management (IAM)
   </a>
   , or you can use the wizard in the Amazon Comprehend Medical console. For detailed information on permissions, please refer to the
   <a href="https://docs.aws.amazon.com/comprehend/latest/dg/access-control-managing-permissions-med.html#auth-role-permissions-med">
    documentation
   </a>
   .
  </p>
  <p>
   <a href="https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2019/07/16/jsimon-cmedical-batch4.png">
    <img alt="Step 4 screenshot from Introducing Batch Mode Processing for Amazon Comprehend Medical" class="size-large wp-image-29694 aligncenter" height="423" loading="lazy" src="image04.webp" style="border: 1px solid black;" width="1024"/>
   </a>
  </p>
  <p>
   Then, I create the batch job, and wait for it to complete. After a few minutes, the job is done.
  </p>
  <p>
   <a href="https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2019/09/23/julsimon-comprehendmedical1.png">
    <img alt="Step 5 screenshot from Introducing Batch Mode Processing for Amazon Comprehend Medical" class="size-large wp-image-31005 aligncenter" height="487" loading="lazy" src="image05.webp" style="border: 1px solid black;" width="1024"/>
   </a>
  </p>
  <p>
   Results are available at the output location: one output for each input, containing a JSON-formatted description of entities and their relationships.
  </p>
  <p>
   <a href="https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2019/09/23/julsimon-comprehendmedical2.png">
    <img alt="Step 6 screenshot from Introducing Batch Mode Processing for Amazon Comprehend Medical" class="size-large wp-image-31006 aligncenter" height="500" loading="lazy" src="image06.webp" style="border: 1px solid black;" width="1024"/>
   </a>
  </p>
  <p>
   A manifest also includes global information: number of processed documents, total amount of data, etc. Paths are edited out for clarity.
  </p>
  <p>
   <code>
    {
   </code>
   <br/>
   <code>
    "Summary" : {
   </code>
   <br/>
   <code>
    "Status" : "COMPLETED",
   </code>
   <br/>
   <code>
    "JobType" : "EntitiesDetection",
   </code>
   <br/>
   <code>
    "InputDataConfiguration" : {
   </code>
   <br/>
   <code>
    "Bucket" : "jsimon-comprehend-medical-uswest2",
   </code>
   <br/>
   <code>
    "Path" : "input/"
   </code>
   <br/>
   <code>
    },
   </code>
   <br/>
   <code>
    "OutputDataConfiguration" : {
   </code>
   <br/>
   <code>
    "Bucket" : "jsimon-comprehend-medical-uswest2",
   </code>
   <br/>
   <code>
    "Path" : ...
   </code>
   <br/>
   <code>
    },
   </code>
   <br/>
   <code>
    "InputFileCount" : 4,
   </code>
   <br/>
   <code>
    "TotalMeteredCharacters" : 3636,
   </code>
   <br/>
   <code>
    "UnprocessedFilesCount" : 0,
   </code>
   <br/>
   <code>
    "SuccessfulFilesCount" : 4,
   </code>
   <br/>
   <code>
    "TotalDurationSeconds" : 366,
   </code>
   <br/>
   <code>
    "SuccessfulFilesListLocation" : ... ,
   </code>
   <br/>
   <code>
    "UnprocessedFilesListLocation" : ...
   </code>
   <br/>
   <code>
    }
   </code>
   <br/>
   <code>
    }
   </code>
  </p>
  <p>
   After retrieving the ‘
   <em>
    rash.json.out
   </em>
   ‘ object from S3, I can use a JSON editor to view its contents. Here are some of the entities that have been detected.
  </p>
  <p>
   <a href="https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2019/07/16/jsimon-cmedical-batch9.png">
    <img alt="Step 7 screenshot from Introducing Batch Mode Processing for Amazon Comprehend Medical" class="aligncenter wp-image-29701 size-large" height="1024" loading="lazy" src="image07.webp" style="border: 1px solid black;" width="601"/>
   </a>
  </p>
  <p>
   Of course, this data is not meant to be read by humans. In a production workflow, it would be processed automatically by the Amazon Comprehend Medical
   <a href="https://docs.aws.amazon.com/comprehend/latest/dg/comprehend-medical.html">
    APIs
   </a>
   . Results would then stored in an AWS backend, and made available to healthcare professionals through a business application.
  </p>
  <p>
   <strong>
    <span style="text-decoration: underline;">
     Now Available!
     <br/>
    </span>
   </strong>
   As you can see, it’s extremely easy to use
   <a href="https://aws.amazon.com/comprehend/medical/">
    Amazon Comprehend Medical
   </a>
   in batch mode, even at very large scale. Zero machine learning work and zero infrastructure work required!
  </p>
  <p>
   The service is available today in the following AWS regions:
  </p>
  <ul>
   <li>
    US East (North Virginia), US East (Ohio), US West (Oregon),
   </li>
   <li>
    Canada (Central),
   </li>
   <li>
    EU (Ireland), EU (London),
   </li>
   <li>
    Asia Pacific (Sydney).
   </li>
  </ul>
  <p>
   The
   <a href="https://aws.amazon.com/free">
    free tier
   </a>
   covers 25,000 units of text (2.5 million characters) for the first three months when you start using the service, either with entity extraction or with PHI detection.
  </p>
  <p>
   As always, we’d love to hear your feedback: please post it to the
   <a href="https://forums.aws.amazon.com/forum.jspa?forumID=281">
    AWS forum
   </a>
   for Amazon Comprehend, or send it through your usual AWS contacts.
  </p>
  <p>
   <a href="https://aws.amazon.com/developer/community/evangelists/julien-simon/">
    Julien
   </a>
  </p>
  <!-- '"` -->
  <hr/>
  <h3>
   About the Author
  </h3>
  <p>
   <strong>
    Julien is the Artificial Intelligence &amp; Machine Learning Evangelist for EMEA
   </strong>
   . He focuses on helping developers and enterprises bring their ideas to life. In his spare time, he reads the works of JRR Tolkien again and again.
  </p>
  <p>
  </p>
  <p>
  </p>
  <p>
  </p>
  <!-- '"` -->
 
  
  </body>
 </html>