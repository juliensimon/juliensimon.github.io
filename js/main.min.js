"use strict";class PerformanceMonitor{constructor(){this.metrics={},this.initObservers(),this.initWebVitals()}initObservers(){if("PerformanceObserver"in window)try{new PerformanceObserver(e=>{const t=e.getEntries(),r=t[t.length-1];this.metrics.lcp=Math.round(r.startTime),this.trackMetric("LCP",this.metrics.lcp)}).observe({entryTypes:["largest-contentful-paint"]});new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.metrics.fid=Math.round(e.processingStart-e.startTime),this.trackMetric("FID",this.metrics.fid)})}).observe({entryTypes:["first-input"]});new PerformanceObserver(e=>{let t=0;e.getEntries().forEach(e=>{e.hadRecentInput||(t+=e.value)}),this.metrics.cls=Math.round(1e3*t)/1e3,this.trackMetric("CLS",this.metrics.cls)}).observe({entryTypes:["layout-shift"]});new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.interactionId&&(this.metrics.inp=Math.round(e.processingStart-e.startTime),this.trackMetric("INP",this.metrics.inp))})}).observe({entryTypes:["interaction"]})}catch(e){console.warn("Performance monitoring not supported:",e)}}initWebVitals(){window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&(this.trackMetric("DOMContentLoaded",Math.round(e.domContentLoadedEventEnd-e.domContentLoadedEventStart)),this.trackMetric("LoadComplete",Math.round(e.loadEventEnd-e.loadEventStart)),this.trackMetric("TotalLoadTime",Math.round(e.loadEventEnd-e.fetchStart)))},0)})}trackMetric(e,t){"undefined"!=typeof umami&&umami.track("web_vital",{metric:e,value:t,page:window.location.pathname,timestamp:Date.now()}),"localhost"===window.location.hostname&&console.log(`ðŸ“Š ${e}: ${t}`);try{const r=JSON.parse(localStorage.getItem("performance_metrics")||"{}");r[e]=t,localStorage.setItem("performance_metrics",JSON.stringify(r))}catch(e){}}}class LazyLoader{constructor(){this.images=document.querySelectorAll('img[loading="lazy"]'),this.init()}init(){if(!("IntersectionObserver"in window)||0===this.images.length)return;const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(this.loadImage(e.target),t.unobserve(e.target))})},{rootMargin:"50px 0px",threshold:.01});this.images.forEach(t=>e.observe(t))}loadImage(e){const t=e.dataset.src||e.src;if(!t)return;const r=new Image;r.onload=()=>{e.src=t,e.classList.add("loaded"),e.removeAttribute("data-src"),"undefined"!=typeof umami&&umami.track("image_loaded",{src:t,page:window.location.pathname})},r.onerror=()=>{console.warn("Failed to load image:",t),e.classList.add("error"),"undefined"!=typeof umami&&umami.track("image_error",{src:t,page:window.location.pathname})},r.src=t}}class Navigation{constructor(){this.init()}init(){this.highlightCurrentPage(),this.initSmoothScrolling(),this.initAnalytics(),this.initKeyboardNavigation()}highlightCurrentPage(){const e=window.location.pathname.split("/").pop()||"index.html";document.querySelectorAll(".nav-tab").forEach(t=>{t.getAttribute("href")===e&&t.classList.add("active")})}initSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const r=e.getAttribute("href").substring(1),i=document.getElementById(r);i&&(i.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,null,`#${r}`),"undefined"!=typeof umami&&umami.track("internal_link_click",{target:r,page:window.location.pathname}))})})}initKeyboardNavigation(){document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")})}initAnalytics(){"undefined"!=typeof umami&&umami.track("page_view",{page:window.location.pathname,title:document.title,referrer:document.referrer,userAgent:navigator.userAgent,viewport:`${window.innerWidth}x${window.innerHeight}`});document.querySelectorAll('a[href^="http"]').forEach(e=>{e.addEventListener("click",()=>{"undefined"!=typeof umami&&umami.track("external_link_click",{url:e.href,text:e.textContent.trim(),page:window.location.pathname,target:e.target||"_self"})})});document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",()=>{"undefined"!=typeof umami&&umami.track("form_submit",{form:e.id||e.className,page:window.location.pathname})})})}}class ErrorMonitor{constructor(){this.init()}init(){window.addEventListener("error",e=>{this.trackError("JavaScript Error",e.error||e.message,e.filename,e.lineno)}),window.addEventListener("unhandledrejection",e=>{this.trackError("Unhandled Promise Rejection",e.reason,"",0)})}trackError(e,t,r,i){"undefined"!=typeof umami&&umami.track("error",{type:e,message:t,filename:r,lineno:i,page:window.location.pathname,userAgent:navigator.userAgent}),console.error(`ðŸš¨ ${e}:`,t,r,i)}}const utils={debounce(e,t){let r;return function(...i){clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),e(...i)},t)}},throttle(e,t){let r;return function(){const i=arguments,n=this;r||(e.apply(n,i),r=!0,setTimeout(()=>r=!1,t))}},async fetchWithTimeout(e,t={}){const{timeout:r=5e3,...i}=t,n=new AbortController,o=setTimeout(()=>n.abort(),r);try{const t=await fetch(e,{...i,signal:n.signal});return clearTimeout(o),t}catch(e){throw clearTimeout(o),e}},async copyToClipboard(e){try{return await navigator.clipboard.writeText(e),!0}catch(t){const r=document.createElement("textarea");return r.value=e,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),!0}},getDeviceType(){const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/mobile|android|iphone|ipod|blackberry|opera mini|iemobile/i.test(e)?"mobile":"desktop"}};document.addEventListener("DOMContentLoaded",()=>{window.performanceMonitor=new PerformanceMonitor,window.lazyLoader=new LazyLoader,window.navigation=new Navigation,window.errorMonitor=new ErrorMonitor,"localhost"===window.location.hostname&&(window.utils=utils),"undefined"!=typeof umami&&umami.track("page_loaded",{page:window.location.pathname,loadTime:performance.now(),deviceType:utils.getDeviceType()})}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})});